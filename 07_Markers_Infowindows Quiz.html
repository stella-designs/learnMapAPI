<!-- This is the corresponding "starter code" for 07_Markers/Infowindows in Udacity and Google's Maps
API Course, Lesson 1 -->
<html>
 <head>
 <!-- styles put here, but you can include a CSS file and reference it instead! -->
   <style type="text/css">
     html, body { height: 100%; margin: 0; padding: 0; }
     #map { height: 100%; }
   </style>
 </head>
 <body>
   <div id="map"></div>
   <script type="text/javascript">
     // Create a map variable
     var map;
     //Blank array for listing markers
     var markers = [];
     // Function to initialize the map within the map div
     function initMap() {
       map = new google.maps.Map(document.getElementById('map'), {
         center: {lat: 47.734145, lng: -122.224433},
         zoom: 14
       });
       // Create a single latLng literal object.
       var singleLatLng = {lat: 47.734145, lng: -122.224433};
       // TODO: Create a single marker appearing on initialize -
       // Create it with the position of the singleLatLng,
       // on the map, and give it your own title!
      
       //List of multiple locations
       var locations = [
         {title: 'Pike Place Market', location: {lat: 47.610136, lng: -122.342057}},
         {title: 'Washington Park Arboretum', location: {lat: 47.630101, lng: -122.294548}},
         {title: 'Simply Soulful', location: {lat: 47.624056, lng: -122.294928}},
         {title: 'Bacco Cafe', location: {lat: 47.610097, lng: -122.341406}},
         {title: 'Seaward Park', location: {lat: 47.549605, lng: -122.257357}},
         {title: 'Mashiko', location: {lat: 47.560369, lng: -122.386989}},
       ]
       // TODO: create a single infowindow, with your own content.
       // It must appear on the marker
      var infowindow = new google.maps.InfoWindow();

      var largeInfoWindow = new google.maps.InfoWindow();
      var bounds = new google.maps.LatLngBounds();

      // Uses location array to create an array of markers
      for (var i = 0; i < locations.length; i++) {
        //get the position from the location array
        var position = locations[i].location;
        var title = locations[i].title;
        // Create a marker per location
        var marker = new google.maps.Marker({
          map: map,
          position: position,
          title: title,
          animation: google.maps.Animation.DROP,
          id: i
        });
        // Push the marker to our array of markers
        markers.push(marker);
        // Extend the boundaries of the map for each marker
        bounds.extend(marker.position);
        // Create an onclock event to open an infowindow at each marker.
        marker.addListener('click', function() {
          populateInfoWindow(this, largeInfoWindow);
        });
      }
      map.fitBounds(bounds);

      marker.addListener('click', function() {
        infowindow.open(map, marker);
      });
     }
     // This function populates the infowindow when the marker is clicked
     function populateInfoWindow(marker, infowindow) {
       // Check to make sure the infowindow is not already open on this marker
       if (infowindow.marker != marker) {
         infowindow.marker = marker;
         infowindow.setContent('<div>' + marker.title + '</div>');
         infowindow.open(map, marker);
         //Make sure the marker property is cleared if the infowindow is closed.
         infowindow.addListener('closeclick', function(){
           infowindow.setMarker(null);
         });
       }
     }

   </script>
   <!--TODO: Insert your API Key in the below call to load the API.-->
   <script async defer
     src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyBaxn5iVdBHebWWKcT0X5aeqw3eZERiI-w&callback=initMap">
   </script>
 </body>
</html>
